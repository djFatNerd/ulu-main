# Image Processing Utilities

This directory contains utilities for converting geospatial building data into pixel coordinates and visualizing the resulting shapes on a reference map.

## `convert_building_coordinates.py`

**Purpose:**
Converts building footprints stored in a GeoJSON file into pixel-space coordinates compatible with a raster image. The script reads building metadata, applies the desired map scale (meters per pixel), and outputs the transformed geometries as line-delimited JSON.

**Usage:**
```bash
python convert_building_coordinates.py \
    --geojson buildings_enriched_osm_overture.geojson \
    --meta metadata_osm_overture.json \
    --out buildings_pixels.jsonl \
    --mpp 1 \
    --width 4000 \
    --height 4000
```

Key options:
- `--geojson`: Input building footprints in GeoJSON format.
- `--meta`: Metadata describing the geographic bounds of the source data.
- `--out`: Path to the JSON Lines file that will store the pixel-space geometries.
- `--mpp`: Map scale, specified as meters per pixel.
- `--width` / `--height`: Dimensions of the target raster canvas in pixels.

## `visualize_buildings.py`

**Purpose:**
Renders the pixel-space building geometries on top of a base image for qualitative inspection. Supports multiple visualization modes (e.g., polygons or bounding boxes) to review a subset of buildings.

**Usage:**
```bash
python visualize_buildings.py \
    --jsonl buildings_pixels.jsonl \
    --base_image semantic_map_colored.png \
    --out viz_poly.png \
    --mode polygon \
    --num 10 \
    --line_width 2 \
    --seed 42
```

Key options:
- `--jsonl`: Pixel-space building geometries generated by `convert_building_coordinates.py`.
- `--base_image`: The underlying raster image used as the visualization backdrop.
- `--out`: Output path for the visualization image.
- `--mode`: Rendering style (e.g., `polygon` or `bbox`).
- `--num`: Number of buildings to draw from the dataset.
- `--line_width`: Width of the polygon or bounding-box edges.
- `--seed`: Random seed that controls which buildings are sampled when drawing a subset.

## Workflow Overview
1. Convert geospatial building footprints to pixel coordinates with `convert_building_coordinates.py`.
2. Visualize the converted geometries over the semantic map with `visualize_buildings.py`.

This flow enables rapid inspection of how building footprints align with the corresponding raster imagery.
